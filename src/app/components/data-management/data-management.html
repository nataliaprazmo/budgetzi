<div class="data-management-container">
  <mat-card class="data-management-card">
    <mat-card-header>
      <mat-card-title>Data Management</mat-card-title>
      <mat-card-subtitle>Import, export, and manage your transactions</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      @let isLoading = loading$ | async; @let transactionLength = (transactions$ | async)?.length ??
      0;

      <div class="action-buttons">
        <button mat-raised-button color="primary" (click)="importSample()" [disabled]="isLoading">
          @if (isLoading) {
          <mat-spinner diameter="20"></mat-spinner>
          <span>Loading Sample Data...</span>
          } @else {
          <span>Import Sample Data</span>
          }
        </button>

        <button mat-raised-button color="accent" (click)="importCsv()" [disabled]="isLoading">
          @if (isLoading) {
          <mat-spinner diameter="20"></mat-spinner>
          <span>Importing CSV...</span>
          } @else {
          <span>Import from CSV</span>
          }
        </button>

        <button
          mat-raised-button
          (click)="exportCsv()"
          [disabled]="isLoading || !transactionLength"
        >
          @if (isLoading) {
          <mat-spinner diameter="20"></mat-spinner>
          <span>Exporting...</span>
          } @else {
          <span>Export to CSV</span>
          }
        </button>

        <button
          mat-raised-button
          color="warn"
          (click)="clearAllData()"
          [disabled]="!transactionLength"
          class="action-button"
        >
          Clear All Data
        </button>
      </div>

      <input
        #fileInput
        type="file"
        accept=".csv"
        (change)="onFileSelected($event)"
        style="display: none"
      />

      <div class="help-text">
        <p>
          <strong>CSV Format:</strong> Your CSV file should include columns: Date, Title,
          Description, Category, Amount, Type
        </p>
        <p><strong>File Limit:</strong> Maximum file size is 5MB</p>
      </div>
    </mat-card-content>
  </mat-card>
</div>
